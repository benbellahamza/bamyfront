<div class="space-y-6 h-full">
  <!-- üïí Date & compteur -->
  <div class="flex justify-between items-center">
    <div class="flex items-center gap-2 text-slate-700 font-mono text-sm md:text-base">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      {{ currentTime }}
    </div>
    <div class="badge badge-info text-sm font-semibold shadow">
      Visiteurs aujourd'hui : {{ compteur }}
    </div>
  </div>

  <!-- ‚úÖ Message confirmation -->
  <div *ngIf="confirmationMessage" class="alert alert-success shadow text-sm">
    ‚úÖ {{ confirmationMessage }}
  </div>

  <!-- üìù Formulaire -->
  <form [formGroup]="visiteurForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <h2 class="text-2xl font-bold text-slate-800 border-b pb-3 border-slate-200">
      {{ selectedVisiteurId ? 'Modifier visiteur' : 'Nouveau visiteur' }}
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Nom -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Nom *</label>
        <input type="text" formControlName="nom" placeholder="Nom"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
        <div *ngIf="visiteurForm.get('nom')?.invalid && visiteurForm.get('nom')?.touched" class="text-xs text-red-500 mt-1">
          Champ requis
        </div>
      </div>

      <!-- Pr√©nom -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Pr√©nom *</label>
        <input type="text" formControlName="prenom" placeholder="Pr√©nom"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
        <div *ngIf="visiteurForm.get('prenom')?.invalid && visiteurForm.get('prenom')?.touched" class="text-xs text-red-500 mt-1">
          Champ requis
        </div>
      </div>

      <!-- CIN -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">CIN *</label>
        <input type="text" formControlName="cin" placeholder="CIN"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
        <div *ngIf="visiteurForm.get('cin')?.invalid && visiteurForm.get('cin')?.touched" class="text-xs text-red-500 mt-1">
          Minimum 5 caract√®res requis
        </div>
      </div>

      <!-- T√©l√©phone -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">T√©l√©phone *</label>
        <input type="text" formControlName="telephone" placeholder="T√©l√©phone"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
      </div>

      <!-- Destination -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Destination *</label>
        <select formControlName="destination" 
               class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white">
          <option value="">-- S√©lectionnez --</option>
          <option value="atelier">Atelier</option>
          <option value="administration">Administration</option>
          <option value="r√©ception">R√©ception</option>
          <option value="comptoir">Comptoir</option>
        </select>
      </div>

      <!-- Type de visiteur -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Type de visiteur</label>
        <select formControlName="typeVisiteur" 
               class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white">
          <option value="">-- S√©lectionnez --</option>
          <option value="Prestataire/Fournisseur">Prestataire / Fournisseur</option>
          <option value="Client">Client</option>
        </select>
      </div>
      <!-- Genre -->
<div class="md:col-span-2">
  <label class="text-xs font-bold text-slate-600 mb-2 uppercase">Genre *</label>
  <div class="flex justify-center gap-4">
    <!-- Homme -->
    <button type="button"
            (click)="visiteurForm.get('genre')?.setValue('Homme')"
            [ngClass]="{
              'bg-blue-50 text-blue-600 border-blue-500 shadow-sm': visiteurForm.get('genre')?.value === 'Homme',
              'border-gray-200 text-gray-500 hover:border-gray-300': visiteurForm.get('genre')?.value !== 'Homme'
            }"
            class="flex flex-col items-center justify-center gap-1 px-6 py-3 rounded-lg border-2 transition-all duration-200 w-28">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" 
              d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"/>
      </svg>
      <span class="text-sm font-medium">Homme</span>
    </button>

    <!-- Femme -->
    <button type="button"
            (click)="visiteurForm.get('genre')?.setValue('Femme')"
            [ngClass]="{
              'bg-pink-50 text-pink-600 border-pink-500 shadow-sm': visiteurForm.get('genre')?.value === 'Femme',
              'border-gray-200 text-gray-500 hover:border-gray-300': visiteurForm.get('genre')?.value !== 'Femme'
            }"
            class="flex flex-col items-center justify-center gap-1 px-6 py-3 rounded-lg border-2 transition-all duration-200 w-28">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" 
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" 
              d="M12 14a3 3 0 100-6 3 3 0 000 6z"/>
      </svg>
      <span class="text-sm font-medium">Femme</span>
    </button>
  </div>
</div>

      <!-- Matricule (si Atelier) -->
      <div *ngIf="visiteurForm.get('destination')?.value === 'atelier'" class="md:col-span-2 flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Matricule</label>
        <input type="text" formControlName="matricule" placeholder="Num√©ro de matricule"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
      </div>
    </div>

    <!-- Bouton -->
    <div class="pt-4">
      <button type="submit"
              class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors shadow-md"
              [disabled]="loading || visiteurForm.invalid">
        <span *ngIf="loading" class="loading loading-spinner mr-2"></span>
        {{ selectedVisiteurId ? 'Modifier' : 'Confirmer' }}
      </button>
    </div>
  </form>
</div>