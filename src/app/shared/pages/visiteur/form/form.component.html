<div class="space-y-6 h-full">
 <!-- ‚úÖ Bloc stylis√© Date & Compteur -->
<div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/80 p-4 rounded-xl shadow-sm border border-slate-200 animate-fade-in">
  <!-- üïí Date & Heure -->
  <div class="flex items-center gap-3">
    <div class="bg-blue-100 text-blue-600 rounded-full p-2 shadow-md">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
    </div>
    <div class="text-sm md:text-base font-medium text-slate-700 font-mono tracking-wide">
      {{ currentTime }}
    </div>
  </div>
  <!-- üî¢ Compteur -->
  <div class="flex items-center gap-2 bg-blue-50 text-blue-800 px-4 py-2 rounded-full shadow-inner text-sm font-semibold">
    <i class="fas fa-users text-blue-500"></i>
    <span>Visiteurs aujourd'hui :</span>
    <span class="font-bold text-blue-700">{{ compteur }}</span>
  </div>
</div>

  <!-- ‚úÖ Message confirmation -->
  <div *ngIf="confirmationMessage" class="alert alert-success shadow text-sm">
    ‚úÖ {{ confirmationMessage }}
  </div>

  <!-- üìù Formulaire -->
  <form [formGroup]="visiteurForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <h2 class="text-2xl font-bold text-slate-800 border-b pb-3 border-slate-200">
      {{ selectedVisiteurId ? 'Modifier visiteur' : 'Nouveau visiteur' }}
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Nom -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Nom </label>
        <input type="text" formControlName="nom" placeholder="Nom"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
        <div *ngIf="visiteurForm.get('nom')?.invalid && visiteurForm.get('nom')?.touched" class="text-xs text-red-500 mt-1">
          Champ requis
        </div>
      </div>

      <!-- Pr√©nom -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Pr√©nom </label>
        <input type="text" formControlName="prenom" placeholder="Pr√©nom"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
        <div *ngIf="visiteurForm.get('prenom')?.invalid && visiteurForm.get('prenom')?.touched" class="text-xs text-red-500 mt-1">
          Champ requis
        </div>
      </div>

      <!-- CIN -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">CIN </label>
        <input type="text" formControlName="cin" placeholder="CIN"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
        <div *ngIf="visiteurForm.get('cin')?.invalid && visiteurForm.get('cin')?.touched" class="text-xs text-red-500 mt-1">
          Minimum 5 caract√®res requis
        </div>
      </div>

      <!-- T√©l√©phone -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">T√©l√©phone </label>
        <input type="text" formControlName="telephone" placeholder="T√©l√©phone"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
      </div>

      <!-- Destination -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Destination </label>
        <select formControlName="destination" 
               class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white">
          <option value="">-- S√©lectionnez --</option>
          <option value="atelier">Atelier</option>
          <option value="administration">Administration</option>
          <option value="r√©ception">R√©ception</option>
          <option value="comptoir">Comptoir</option>
        </select>
      </div>

      <!-- Type de visiteur -->
      <div class="flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Type de visiteur</label>
        <select formControlName="typeVisiteur" 
               class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm bg-white">
          <option value="">-- S√©lectionnez --</option>
          <option value="Prestataire/Fournisseur">Prestataire / Fournisseur</option>
          <option value="Client">Client</option>
        </select>
      </div>
      <!-- Genre -->
<div class="md:col-span-2">
  <label class="text-xs font-bold text-slate-600 mb-2 uppercase">Genre </label>
  <div class="flex justify-center gap-4">
  <!-- Homme -->
<button type="button"
        (click)="visiteurForm.get('genre')?.setValue('Homme')"
        [ngClass]="{
          'bg-blue-50 text-blue-600 border-blue-500 shadow-sm': visiteurForm.get('genre')?.value === 'Homme',
          'border-gray-200 text-gray-500 hover:border-gray-300': visiteurForm.get('genre')?.value !== 'Homme'
        }"
        class="flex flex-col items-center justify-center gap-1 px-6 py-3 rounded-lg border-2 transition-all duration-200 w-28">
  <svg viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="h-8 w-8" preserveAspectRatio="xMidYMid meet" fill="#000000">
    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
    <g id="SVGRepo_iconCarrier">
      <path fill="#F7DECE" d="M8 19c0 2.209-1.119 4-2.5 4S3 21.209 3 19s1.119-4 2.5-4S8 16.791 8 19zm25 0c0 2.209-1.119 4-2.5 4S28 21.209 28 19s1.119-4 2.5-4s2.5 1.791 2.5 4z"></path>
      <path fill="#F7DECE" d="M5 20.562c0-8.526 5.82-15.438 13-15.438s13 6.912 13 15.438S25.18 36 18 36S5 29.088 5 20.562z"></path>
      <path fill="#662113" d="M13 20a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v2a1 1 0 0 1-1 1zm10 0a1 1 0 0 1-1-1v-2a1 1 0 1 1 2 0v2a1 1 0 0 1-1 1z"></path>
      <path fill="#C1694F" d="M19 24h-2a1 1 0 1 1 0-2h2a1 1 0 1 1 0 2z"></path>
      <path fill="#292F33" d="M18 0c8.615 0 14 6.358 14 11.656c0 5.298-1.077 7.417-2.154 5.298l-2.153-4.238s-6.462 0-8.615-2.12c0 0 3.23 6.358-3.231 0c0 0 1.077 4.239-5.385-1.06c0 0-3.23 2.12-4.308 7.417C5.855 18.423 4 16.954 4 11.656C4 6.357 8.308 0 18 0zm9.375 24.174c-1.042 1.1-3.125 3.3-5.208 2.2c-2.946-1.556-4.167-1.1-4.167-1.1s-1.221-.455-4.167 1.1c-2.083 1.1-4.167-1.1-5.208-2.2c-.737-.778-3.125-2.2-3.125 0c0 3.3 2.083 5.5 2.083 5.5c2.083 5.5 6.25 5.5 6.25 5.5c1.042 1.1 7.292 1.1 8.333 0c0 0 4.167 0 6.25-5.5c0 0 2.083-2.2 2.083-5.5c.001-2.2-2.388-.777-3.124 0z"></path>
      <path fill="#F7DECE" d="M18 29.675c-4.167 0-7.292-2.2 0-2.2s4.167 2.2 0 2.2"></path>
    </g>
  </svg>
  <span class="text-sm font-medium">Homme</span>
</button>

    <!-- Femme -->
    <button type="button"
        (click)="visiteurForm.get('genre')?.setValue('Femme')"
        [ngClass]="{
          'bg-pink-50 text-pink-600 border-pink-500 shadow-sm': visiteurForm.get('genre')?.value === 'Femme',
          'border-gray-200 text-gray-500 hover:border-gray-300': visiteurForm.get('genre')?.value !== 'Femme'
        }"
        class="flex flex-col items-center justify-center gap-1 px-6 py-3 rounded-lg border-2 transition-all duration-200 w-28">
      <svg viewBox="0 0 128 128" data-name="Layer 1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8">
        <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
        <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
        <g id="SVGRepo_iconCarrier">
      <defs>
        <style>
          .cls-1{fill:#ffffff;}.cls-14,.cls-17,.cls-2{fill:#ffffff;}.cls-2,.cls-4{opacity:0.4;}.cls-3{fill:#7f3838;}.cls-4{fill:#393c54;}.cls-5{fill:#fbc0aa;}.cls-6{fill:#4bc190;}.cls-7{fill:#356cb6;opacity:0.3;}.cls-8{fill:#ffffff;}.cls-12,.cls-15,.cls-16,.cls-9{fill:none;stroke-linecap:round;}.cls-15,.cls-9{stroke:#fbc0aa;}.cls-15,.cls-16,.cls-9{stroke-linejoin:round;}.cls-9{stroke-width:14px;}.cls-10{fill:#ffd8c9;}.cls-11{fill:#bc5b57;}.cls-12{stroke:#ffffff;stroke-miterlimit:10;}.cls-12,.cls-16{stroke-width:2px;}.cls-12,.cls-14{opacity:0.1;}.cls-13{fill:#515570;}.cls-15{stroke-width:4px;}.cls-16{stroke:#515570;opacity:0.2;}
        </style>
      </defs>
      <circle class="cls-1" cx="64" cy="64" r="60"></circle>
      <circle class="cls-2" cx="64" cy="64" r="48"></circle>
      <path class="cls-3" d="M64,14h0A32,32,0,0,1,96,46V87a6,6,0,0,1-6,6H38a6,6,0,0,1-6-6V46A32,32,0,0,1,64,14Z"></path>
      <path class="cls-4" d="M62.73,22h2.54A23.73,23.73,0,0,1,89,45.73V88.55A4.45,4.45,0,0,1,84.55,93H43.45A4.45,4.45,0,0,1,39,88.55V45.73A23.73,23.73,0,0,1,62.73,22Z"></path>
      <circle class="cls-5" cx="89" cy="65" r="7"></circle>
      <path class="cls-6" d="M64,124a59.67,59.67,0,0,0,34.69-11.06l-3.32-9.3A10,10,0,0,0,86,97H42.05a10,10,0,0,0-9.42,6.64l-3.32,9.3A59.67,59.67,0,0,0,64,124Z"></path>
      <path class="cls-7" d="M45,110l5.55,2.92L48,121.84a60.14,60.14,0,0,0,9,1.74V96.5L44.62,106.75A2,2,0,0,0,45,110Z"></path>
      <path class="cls-7" d="M71,96.5v27.09a60.14,60.14,0,0,0,9-1.74l-2.54-8.93L83,110a2,2,0,0,0,.41-3.25Z"></path>
      <path class="cls-8" d="M57,123.68a58.54,58.54,0,0,0,14,0V98H57Z"></path>
      <line class="cls-9" x1="64" x2="64" y1="88.75" y2="98.5"></line>
      <circle class="cls-5" cx="39" cy="65" r="7"></circle>
      <path class="cls-10" d="M64,91A25,25,0,0,1,39,66V49.52a25,25,0,1,1,50,0V66A25,25,0,0,1,64,91Z"></path>
      <path class="cls-11" d="M91.49,51.12V46.4c0-14.95-11.71-27.61-26.66-28A27.51,27.51,0,0,0,36.51,45.82v5.33a2,2,0,0,0,2,2h6.81a8,8,0,0,0,6.5-3.33l4.94-6.88h0a18.45,18.45,0,0,1,1.37,1.63A22.84,22.84,0,0,0,76,53.15H89.45A2,2,0,0,0,91.49,51.12Z"></path>
      <path class="cls-12" d="M62.76,36.94C67,45.68,73.47,47.15,78.85,47.15h5"></path>
      <path class="cls-12" d="M71,35c2.52,5.22,6.39,6.09,9.6,6.09h3"></path>
      <circle class="cls-13" cx="76" cy="62.28" r="3"></circle>
      <circle class="cls-13" cx="52" cy="62.28" r="3"></circle>
      <ellipse class="cls-14" cx="50.42" cy="69.67" rx="4.58" ry="2.98"></ellipse>
      <ellipse class="cls-14" cx="77.58" cy="69.67" rx="4.58" ry="2.98"></ellipse>
      <line class="cls-15" x1="64" x2="64" y1="67" y2="71"></line>
      <line class="cls-16" x1="55" x2="45.75" y1="56" y2="56"></line>
      <line class="cls-16" x1="82" x2="72.75" y1="56" y2="56"></line>
      <path class="cls-2" d="M64,84c5,0,7-3,7-3H57S59,84,64,84Z"></path>
      <path class="cls-17" d="M65.07,78.93l-.55.55a.73.73,0,0,1-1,0l-.55-.55c-1.14-1.14-2.93-.93-4.27.47L57,81H71l-1.66-1.6C68,78,66.21,77.79,65.07,78.93Z"></path>
    </g>
    </svg>
      <span class="text-sm font-medium">Femme</span>
    </button>
    </div>
    </div>

      <!-- Matricule (si Atelier) -->
      <div *ngIf="visiteurForm.get('destination')?.value === 'atelier'" class="md:col-span-2 flex flex-col">
        <label class="text-xs font-bold text-slate-600 mb-1 uppercase">Matricule</label>
        <input type="text" formControlName="matricule" placeholder="Num√©ro de matricule"
              class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm" />
      </div>
    </div>

    <!-- Bouton -->
    <div class="pt-4">
      <button type="submit"
              class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors shadow-md"
              [disabled]="loading || visiteurForm.invalid">
        <span *ngIf="loading" class="loading loading-spinner mr-2"></span>
        {{ selectedVisiteurId ? 'Modifier' : 'Confirmer' }}
      </button>
    </div>
  </form>
</div>