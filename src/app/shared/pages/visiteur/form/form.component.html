<!-- FORMULAIRE Dâ€™AJOUT VISITEUR -->
<section class="w-full px-4 py-8">
  <div class="container mx-auto px-6 py-8 bg-white rounded-lg shadow-xl">

    <!-- Horloge et compteur -->
    <div class="flex justify-between items-center mb-6">
      <div class="text-xl font-bold text-blue-600">{{ currentTime }}</div>
      <div class="badge badge-lg badge-info font-semibold">ðŸ‘¥ Visiteurs aujourd'hui : {{ compteur }}</div>
    </div>

    <!-- Alertes -->
    <div *ngIf="confirmationMessage" class="alert alert-success mb-4 shadow">
      âœ… {{ confirmationMessage }}
    </div>

    <!-- Formulaire principal -->
    <form [formGroup]="visiteurForm" (ngSubmit)="onSubmit()" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Nom -->
      <div>
        <label class="label">Nom *</label>
        <input type="text" formControlName="nom" class="input input-bordered w-full" placeholder="Nom" />
        <small *ngIf="visiteurForm.get('nom')?.invalid && visiteurForm.get('nom')?.touched" class="text-error">Champ requis</small>
      </div>

      <!-- PrÃ©nom -->
      <div>
        <label class="label">PrÃ©nom *</label>
        <input type="text" formControlName="prenom" class="input input-bordered w-full" placeholder="PrÃ©nom" />
        <small *ngIf="visiteurForm.get('prenom')?.invalid && visiteurForm.get('prenom')?.touched" class="text-error">Champ requis</small>
      </div>

      <!-- CIN -->
      <div>
        <label class="label">CIN *</label>
        <input type="text" formControlName="cin" class="input input-bordered w-full" placeholder="CIN" />
        <small *ngIf="visiteurForm.get('cin')?.invalid && visiteurForm.get('cin')?.touched" class="text-error">Minimum 5 caractÃ¨res requis</small>
      </div>

      <!-- TÃ©lÃ©phone -->
      <div>
        <label class="label">TÃ©lÃ©phone *</label>
        <input type="text" formControlName="telephone" class="input input-bordered w-full" placeholder="TÃ©lÃ©phone" />
      </div>

      <!-- Genre -->
      <div class="md:col-span-2">
        <label class="label">Genre *</label>
        <div class="flex justify-center gap-10">
          <div class="cursor-pointer p-4 rounded-full"
               [class.bg-primary]="visiteurForm.get('genre')?.value === 'Homme'"
               (click)="visiteurForm.get('genre')?.setValue('Homme')">
            <div class="text-3xl text-center">ðŸ‘¨</div>
            <div class="text-center mt-1">Homme</div>
          </div>
          <div class="cursor-pointer p-4 rounded-full"
               [class.bg-primary]="visiteurForm.get('genre')?.value === 'Femme'"
               (click)="visiteurForm.get('genre')?.setValue('Femme')">
            <div class="text-3xl text-center">ðŸ‘©</div>
            <div class="text-center mt-1">Femme</div>
          </div>
        </div>
      </div>

      <!-- Destination -->
      <div>
        <label class="label">Destination *</label>
        <select class="select select-bordered w-full" formControlName="destination">
          <option value="">SÃ©lectionnez une destination</option>
          <option value="atelier">Atelier</option>
          <option value="administration">Administration</option>
          <option value="rÃ©ception">RÃ©ception</option>
          <option value="comptoir">Comptoir</option>
        </select>
      </div>

      <!-- Type de visiteur -->
      <div>
        <label class="label">Type de visiteur</label>
        <select class="select select-bordered w-full" formControlName="typeVisiteur">
          <option value="">-- Facultatif --</option>
          <option value="Particulier">Particulier</option>
          <option value="Entreprise">Entreprise</option>
        </select>
      </div>

      <!-- Matricule -->
      <div *ngIf="visiteurForm.get('destination')?.value === 'atelier'" class="md:col-span-2">
        <label class="label">Matricule *</label>
        <input type="text" formControlName="matricule" class="input input-bordered w-full" placeholder="NumÃ©ro de matricule" />
      </div>

      <!-- Bouton -->
      <div class="md:col-span-2 flex justify-center mt-4">
        <button type="submit" class="btn btn-primary w-1/2" [disabled]="loading || visiteurForm.invalid">
          <span *ngIf="loading" class="loading loading-spinner mr-2"></span>
          {{ selectedVisiteurId ? 'Modifier' : 'Confirmer' }}
        </button>
      </div>
    </form>

  </div>
</section>
